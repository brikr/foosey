<ion-view view-title="Leaderboard" cache-view="false">
  
  <!-- show loading on the top right if loading -->
  <ion-nav-buttons side="right">
    <button class="button button-clear" ng-if="loading">
      <ion-spinner icon="lines" class="dark"></ion-spinner>
    </button>
  </ion-nav-buttons>
  
  <!-- Header bar for different leaderboards -->
  <div class="bar bar-subheader background">
    <div class="tabs">
      <a class="tab-item" ng-click="slideTo(0)"
        ng-class="{active: slide === 0}">ELO Rating</a>     
      <a class="tab-item" ng-click="slideTo(1)"
        ng-class="{active: slide === 1}">Average Score</a>      
      <a class="tab-item" ng-click="slideTo(2)"
        ng-class="{active: slide === 2}">Win Percentage</a>
    </div>      
  </div>

  <ion-content class="background has-subheader" has-bouncing="true">
    <!-- pull to refresh -->
    <ion-refresher pulling-text="Pull to refresh..." spinner="lines" on-refresh="refresh()"></ion-refresher>

    <!-- Show if error -->
    <ion-item ng-show="error">No internet connection :(</ion-item>

    <!-- show loading while waiting -->
    <ion-spinner ng-show="!elos && !error" class="loading-dots" icon="lines"></ion-spinner>

    <ion-slide-box on-slide-changed="changeSlide($index)" show-pager="false">

      <!-- ELO Ratings -->
      <ion-slide>
        <ion-list>
          <ion-item 
            ng-repeat="player in elos" 
            ng-class="{'last': $last}"
            href="#/app/player/{{player.name}}">
            <div class="spaced-out">
              <h2>
                <div class="rank">{{$index + 1}}</div> 
                {{player.name | capitalize}}
              </h2> 
              <div class="spaced-out">
                <div><b>{{player.elo}}</b></div>
                <div class="elo-change" ng-class="{'green': player.change > 0, 'red': player.change < 0}">{{player.change | eloChange}}</div>
                <div class="ion-ios-arrow-forward" style="padding-left:16px"></div>
              </div>
            </div>
          </ion-item>
        </ion-list>
      </ion-slide>

      <!-- Avg Score -->
      <ion-slide>
        <ion-item 
          ng-repeat="player in avgs" 
          ng-class="{'last': $last}"
          href="#/app/player/{{player.name}}">
          <div class="spaced-out">
            <h2>
              <div class="rank">{{$index + 1}}</div> 
              {{player.name | capitalize}}
            </h2> 
            <div class="spaced-out">
              <b>{{player.avg | number:2}}</b>
              <div class="ion-ios-arrow-forward" style="padding-left:16px"></div>
            </div>
          </div>
        </ion-item>
      </ion-slide>

      <!-- % Games won -->
      <ion-slide>
        <ion-item 
          ng-repeat="player in percent" 
          ng-class="{'last': $last}"
          href="#/app/player/{{player.name}}">
          <div class="spaced-out">
            <h2>
              <div class="rank">{{$index + 1}}</div> 
              {{player.name | capitalize}}
            </h2> 
            <div class="spaced-out">
              <b>{{player.percent | number:1}}%</b>
              <div class="ion-ios-arrow-forward" style="padding-left:16px"></div>
            </div>
          </div>
        </ion-item>
      </ion-slide>

    </ion-slide-box>
  </ion-content>
</ion-view>