<ion-view view-title="Game Detail" cache-view="false">

  <!-- trash game -->
  <ion-nav-buttons side="right">
    <button class="button button-clear ion-trash-a" ng-click="remove()"></button>
  </ion-nav-buttons>

  <ion-content class="background" has-bouncing="true">

    <!-- Shitty copied code, need to erase -->
    <div class="card">
      <div class="item item-divider">{{game ? (game.timestamp | time:true) : 'Loading...'}}</div>
      <ion-item ng-show="!game">Loading</ion-item>
      <ion-item class="game-item" ng-show="game">
        <div class="spaced-out">
          <div ng-repeat="team in game.teams" class="game-score">
            <div ng-repeat="player in team.players">
              <span ng-class="{'bold' : player.playerID === settings.playerID }">{{player.displayName | capitalize}}</span>
              <span 
                ng-show="settings.showElo && player.change !== null"
                ng-class="{'elo-green': team.delta > 0, 'elo-red': team.delta < 0}">
                {{team.delta | eloChange}}
              </span>
            </div>
            <div><strong>{{team.score}}</strong></div>
          </div>
        </div>
        <div class="time">{{game.timestamp | time}}</div>
      </ion-item>
    </div>

    <!-- Disclaimer -->
    <div class="card" ng-show="game && !fetching">
      <div class="item item-divider">Not Available</div>
        <ion-item ng-show="!games">
          No history for {{game.teams.length * game.teams[0].players.length}} person games yet!
        </ion-item>
    </div>

    <!-- Record -->
    <div class="card" ng-show="fetching">
      <ion-list>
        <div class="item item-divider">Record</div>
        <ion-item ng-show="!teams">
          Loading...
        </ion-item>
        <ion-item class="game-item" ng-if="teams">
          <div class="spaced-out">
            <div ng-repeat="team in teams" class="game-score">
              <div ng-repeat="player in team.players">
                <span ng-class="{'bold' : player.playerID === settings.playerID }">{{player.displayName | capitalize}}</span>
              </div>
              <div><strong>{{team.wins >= 0 ? team.wins : '-'}}</strong></div>
            </div>
          </div>
        </ion-item>
      </ion-list>
    </div>

    <!-- Past games, also shitty code -->
    <div class="card" ng-show="fetching">
      <ion-list>
        <div class="item item-divider">Past Games</div>
        <ion-item ng-show="!games">
          Loading...
        </ion-item>
        <ion-item ng-class="{'highlight' : g.gameID === game.gameID}" class="game-item" ng-repeat="g in games">
          <div class="spaced-out">
            <div ng-repeat="team in g.teams" class="game-score">
              <div ng-repeat="player in team.players">
                <span ng-class="{'bold' : player.playerID === settings.playerID }">{{player.displayName | capitalize}}</span>
                <span 
                  ng-show="settings.showElo && player.change !== null"
                  ng-class="{'elo-green': team.delta > 0, 'elo-red': team.delta < 0}">
                  {{team.delta | eloChange}}
                </span>
              </div>
              <div><strong>{{team.score}}</strong></div>
            </div>
          </div>
          <div class="time">{{g.timestamp | time:true}}</div>
        </ion-item>
      </ion-list>
    </div>

  </ion-content>
</ion-view>